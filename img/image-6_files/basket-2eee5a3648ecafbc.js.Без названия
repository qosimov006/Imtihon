(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3701,852],{3418:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/basket",function(){return n(1582)}])},3944:function(e,t,n){"use strict";var l=n(1527);t.Z=e=>{let{iconName:t,className:n}=e;return(0,l.jsx)("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:(0,l.jsx)("use",{xlinkHref:"/svg/sprite.svg#".concat(t),width:"100%",height:"100%"})})}},852:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var l=n(1527),s=e=>{let{type:t="default",className:n}=e;return"dots"===t?(0,l.jsxs)("div",{className:"lds-ellipsis",children:[(0,l.jsx)("div",{}),(0,l.jsx)("div",{}),(0,l.jsx)("div",{}),(0,l.jsx)("div",{})]}):"button"===t?(0,l.jsxs)("div",{className:"lds-ring-b ".concat(n),children:[(0,l.jsx)("div",{}),(0,l.jsx)("div",{}),(0,l.jsx)("div",{}),(0,l.jsx)("div",{})]}):(0,l.jsx)("div",{className:"absolute w-full h-full bg-light flex items-center justify-center ",children:(0,l.jsxs)("div",{className:"lds-ring ".concat(n),children:[(0,l.jsx)("div",{}),(0,l.jsx)("div",{}),(0,l.jsx)("div",{}),(0,l.jsx)("div",{})]})})}},8368:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var l=n(1527),s=n(3944),i=n(8810),a=n(2349),r=e=>{let{icon:t,title:n,text:r,btnText:o,mainHeight:c,navigateLink:d,className:u="",height:h}=e,x=(0,a.useRouter)();return(0,l.jsx)("div",{className:"flex items-center justify-center container mx-auto ".concat(u),style:{height:h||"calc(100vh - ".concat(c,"px)")},children:(0,l.jsxs)("div",{className:"max-w-[389px] text-center flex flex-col gap-[24px] items-center",children:[(0,l.jsx)("div",{className:"w-[72px] h-[72px] bg-red-secondary rounded-[20px] flex items-center justify-center stroke-red-primary",children:(0,l.jsx)(s.Z,{iconName:t,className:"w-[32px] h-[32px]"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-[12px] text-center",children:[(0,l.jsx)("p",{className:"text-dark font-[700] text-[20px]",children:n}),(0,l.jsx)("p",{className:"text-gray text-[16px] font-[400] leading-[150%]",children:r})]}),(0,l.jsx)(i.default,{type:"button",buttonType:"danger","aria-label":o,className:"min-w-[280px] rounded-[12px] text-[14px] font-[600]",onClick:()=>x.push(d),children:o})]})})}},6450:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var l=n(1527),s=n(852),i=n(8368),a=e=>{let{status:t,children:n,noData:a,loading:r,className:o="min-h-[100vh]"}=e;return(0,l.jsx)("div",{className:"".concat(o),children:"nodata"===t?(0,l.jsx)(i.Z,{...a}):r?(0,l.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,l.jsx)(s.default,{type:"dots"})}):n})}},7127:function(e,t,n){"use strict";n.d(t,{_:function(){return u},d:function(){return d}});var l=n(1527),s=n(959),i=n(8351),a=n(1043),r=n(2349),o=n.n(r);let c=(0,s.createContext)({data:null,setData:null,totalAmount:0,totalCoreAmount:0,totalDiscount:0}),d=e=>{let{children:t}=e,{basketProducts:n,basketKeys:r}=(0,a.Kc)(),[o,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{var e;async function t(){var e;let t=await i.i.getBasketProducts("?product_ids=".concat(null==r?void 0:r.map(e=>e)));d(null==t?void 0:null===(e=t.products)||void 0===e?void 0:e.map(e=>({...e,checked:!0,count:null==n?void 0:n[null==e?void 0:e.id]})))}(null==r?void 0:r.length)?t():(null===(e=Object.keys(JSON.parse(window.localStorage.getItem("basket_ids")||"{}")))||void 0===e?void 0:e.length)||d([])},[r.length]);let[u,h,x]=(0,s.useMemo)(()=>o&&0!==o.length?o.reduce((e,t)=>{if(t.checked){let l=n[t.id]||1,{actual_price:s,core_price:i}=t;e[0]+=i*l,e[1]+=s*l,e[2]+=(i-s)*l}return e},[0,0,0]):[0,0,0],[o,n]);return(0,l.jsx)(c.Provider,{value:{data:o,setData:d,totalAmount:u,totalCoreAmount:h,totalDiscount:x},children:(0,l.jsx)(c.Consumer,{children:()=>t})})},u=()=>{let{data:e,setData:t,totalAmount:n,totalCoreAmount:l,totalDiscount:i}=(0,s.useContext)(c),{basketProducts:r,addToBasket:d,setBasketProducts:u}=(0,a.Kc)();return{data:e,setData:t,checkboxHandler:e=>{null==t||t(t=>t?t.map(t=>t.id===e?{...t,checked:!t.checked}:t):[])},totalAmount:n,totalCoreAmount:l,totalDiscount:i,allCheckHandler:n=>{null==t||t(e?null==e?void 0:e.map(e=>({...e,checked:!!n})):[])},checkOutHandler:()=>{let t=null==e?void 0:e.map(e=>{if(null==e?void 0:e.checked){let t=r[e.id];return{...e,count:t}}}).filter(Boolean);if(null==t?void 0:t.length){let e=JSON.stringify(t);localStorage.setItem("products",e),o().push("/checkout")}},numHandler:(e,n,l,s)=>{if(null==n?void 0:n.id){let i="plus"===e?(l||1)+1:(l||1)-1;d(null==n?void 0:n.id,i),s(i),null==t||t(e=>e?e.map(e=>e.id===(null==n?void 0:n.id)?{...e,count:i}:e):[])}},deleteHandler:e=>{let t={...r};delete t[e],localStorage.setItem("basket_ids",JSON.stringify(t)),null==u||u(t)}}}},1582:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return b},default:function(){return g}});var l=n(1527),s=n(1043),i=n(4371),a=n(7127),r=n(6450),o=n(1818),c=n.n(o),d=n(959),u=n(852),h=n(5089),x=n(8810),p=()=>{let{data:e,totalCoreAmount:t,checkOutHandler:n}=(0,a._)(),{t:s}=(0,i.$G)();return(0,l.jsxs)("div",{className:"rounded-tl-[16px] rounded-tr-[16px] bg-light p-[16px] sticky bottom-0 mobileM:bottom-[70px] left-0 flex items-center justify-between w-full",style:{boxShadow:"0px -4px 24px 0px rgba(0, 0, 0, 0.04)"},children:[(0,l.jsxs)("div",{className:"flex flex-col gap-[6px]",children:[(0,l.jsxs)("p",{className:"text-gray text-[12px] font-[400]",children:[null==e?void 0:e.length," ",(0,l.jsxs)("span",{className:"mr-[4px]",children:[" ",s("basket.worth")]}),s("basket.goods_worth")]}),(0,l.jsxs)("p",{className:"text-[16px] font-[700] text-dark",children:[s("from")," ",(0,h.E)(t)," ",s("products.sum")]})]}),(0,l.jsx)(x.default,{type:"button",buttonType:"danger","aria-label":s("checkout.step3.order"),className:"py-[12px] text-[14px] font-[600] mobileS:px-[24px] mobileM:px-[34px] rounded-[12px]",onClick:n,children:s("checkout.step3.order")})]})};let f={mobile:c()(()=>Promise.all([n.e(897),n.e(2497),n.e(2063)]).then(n.bind(n,2063)),{loadableGenerated:{webpack:()=>[2063]}}),desktop:c()(()=>Promise.all([n.e(897),n.e(2497),n.e(7043)]).then(n.bind(n,7043)),{loadableGenerated:{webpack:()=>[7043]}})},m=c()(()=>Promise.all([n.e(9919),n.e(9717)]).then(n.bind(n,9717)),{loadableGenerated:{webpack:()=>[9717]}}),v=()=>{let{device:e}=(0,s.hU)(),{t}=(0,i.$G)(),{data:n}=(0,a._)(),o=(0,d.useMemo)(()=>f[e],[e]);return(0,l.jsx)("div",{className:null===n||(null==n?void 0:n.length)?"bg-back":"bg-light",children:(0,l.jsx)(r.Z,{status:null===n||(null==n?void 0:n.length)?"success":"nodata",noData:{mainHeight:166,navigateLink:"/",title:t("basket.basket_empty"),btnText:t("basket.go"),icon:"no_basket",text:t("basket.basket_text")},loading:null===n,children:(0,l.jsxs)("div",{className:"flex flex-col justify-between min-h-[100dvh]",children:[(0,l.jsx)(d.Suspense,{fallback:(0,l.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,l.jsx)(u.default,{type:"dots"})}),children:(0,l.jsx)("div",{className:"".concat("mobile"===e?"max-w-full  ":"container"," mx-auto py-[25px] px-[10px]"),children:(0,l.jsxs)("div",{className:"laptop:grid laptop:grid-cols-3 !gap-[24px] mobileS:flex mobileS:flex-col",children:[(0,l.jsx)("div",{className:"laptop:col-span-2",children:(0,l.jsx)(o,{})}),(0,l.jsx)(m,{})]})})}),"mobile"===e&&(0,l.jsx)(p,{})]})})})};var b=!0,g=()=>{let{device:e}=(0,s.hU)();return(0,l.jsx)(a.d,{isMobile:"mobile"===e,children:(0,l.jsx)(v,{})})}},8351:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var l=n(9);let s=new class{async getBasketProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=await l.SA.get("product_card".concat(e));return null==t?void 0:t.data}}},9:function(e,t,n){"use strict";n.d(t,{I8:function(){return i},SA:function(){return s}});class l{constructor(e){var t=this;this._fetchJSON=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=Object.keys(n.query||{}).map(e=>{var t;return encodeURIComponent(e)+"="+encodeURIComponent((null==n?void 0:null===(t=n.query)||void 0===t?void 0:t[e])||"")}).join("&"),s=n.body instanceof FormData,i={...t._headers,...null==n?void 0:n.headers},a=await fetch(t._baseURL+e+(l?"?".concat(l):""),{...n,body:s?n.body:JSON.stringify(n.body),headers:i});if(!a.ok)throw Error("".concat(a.status,": ").concat(null==a?void 0:a.statusText));return!1!==n.parseResponse&&204!==a.status?a.json():a},this.setBasicAuth=e=>(this._headers.Authorization="Bearer ".concat(e),this),this.setHeader=(e,t)=>(this._headers[e]=t,this),this.get=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t._fetchJSON(e,{...n,method:"GET"})},this.post=function(e,n){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t._fetchJSON(e,{...l,body:n,method:"POST"})},this.patch=function(e,n){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n instanceof FormData;return t._fetchJSON(e,{...l,body:s?n:JSON.stringify(n),method:"PATCH"})},this.put=function(e,n){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t._fetchJSON(e,{...l,body:n,method:"PUT"})},this.delete=function(e,n){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n instanceof FormData;return t._fetchJSON(e,{...l,body:s?n:JSON.stringify(n),method:"DELETE"})},this._baseURL=e.baseURL||"",this._headers=e.headers||{}}}let s=new l({baseURL:"".concat("https://api.admin.newmediapark.uz/v1/"),headers:{"Content-Type":"application/json"}}),i=new l({baseURL:"".concat("https://api.auth.newmediapark.uz/"),headers:{"Content-Type":"application/json"}})},5089:function(e,t,n){"use strict";n.d(t,{E:function(){return l}});let l=e=>{var t;return null==e?null:null==e?void 0:null===(t=e.toString())||void 0===t?void 0:t.replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=3418)}),_N_E=e.O()}]);